<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CSV Chart Viewer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
</head>
<body style="font-family: Arial; padding: 20px;">
  <h2>Tampilkan Grafik dari CSV</h2>  <script>
  // Otomatis membaca file data.csv di GitHub Pages
  fetch('data.csv')
    .then(r => r.text())
    .then(text => renderChart(text));

  function renderChart(text) {
    const rows = text.split(/
?
/).map(r => r.split(','));

    const headers = rows[0];
    const columns = {};
    headers.forEach((h, i) => {
      columns[h] = rows.slice(1).map(r => Number(r[i]) || r[i]);
    });

    const labels = Array.from({ length: rows.length - 1 }, (_, i) => `Data-${i+1}`);
    const randomColor = () => `hsl(${Math.random() * 360}, 70%, 50%)`;

    const datasets = headers.map(h => ({
      label: h,
      data: columns[h],
      borderColor: randomColor(),
      fill: false,
      tension: 0.3
    }));

    new Chart(document.getElementById('myChart'), {
      type: 'line',
      data: { labels, datasets },
      options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });
  }
</script>document.getElementById('csvFile').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function(event) {
    const text = event.target.result;
    const rows = text.split(/\r?\n/).map(r => r.split(','));

    // Ambil header kolom
    const headers = rows[0];

    // Ambil data per kolom
    const columns = {};
    headers.forEach((h, i) => {
      columns[h] = rows.slice(1).map(r => Number(r[i]) || r[i]);
    });

    // Label X memakai baris pertama
    const labels = Array.from({ length: rows.length - 1 }, (_, i) => `Data-${i+1}`);

    // Generate warna otomatis
    const randomColor = () => `hsl(${Math.random() * 360}, 70%, 50%)`;

    // Dataset untuk semua kolom numerik
    const datasets = headers.map(h => ({
      label: h,
      data: columns[h],
      borderColor: randomColor(),
      fill: false,
      tension: 0.3
    }));

    // Render Chart
    new Chart(document.getElementById('myChart'), {
      type: 'line',
      data: {
        labels: labels,
        datasets: datasets
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  };

  reader.readAsText(file);
});

  </script>
</body>
</html>
